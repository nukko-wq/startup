# ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å ±å‘Šæ›¸

## ãƒ¬ãƒ“ãƒ¥ãƒ¼æ¦‚è¦

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Startup (Next.js + Redux + Prisma)
**ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿæ–½æ—¥**: 2025-06-19
**ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¯„å›²**: å…¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
**ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹**: 
- ãƒ­ã‚¸ãƒƒã‚¯ã®æ­£ç¢ºæ€§
- ã‚³ãƒ¼ãƒ‰ã®ç°¡æ½”æ€§ãƒ»å¯èª­æ€§
- å¤‰æ•°åãƒ»é–¢æ•°åã®é©åˆ‡æ€§
- å†åˆ©ç”¨æ€§ãƒ»DRYåŸå‰‡
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¨ˆç”»

### Phase 1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»èªè¨¼å‘¨ã‚Šï¼ˆé«˜å„ªå…ˆåº¦ï¼‰
- [ ] `src/lib/auth.ts` - NextAuthè¨­å®šã¨ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
- [ ] `middleware.ts` - èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
- [ ] ç’°å¢ƒå¤‰æ•°ã®æ‰±ã„
- [ ] èªè¨¼ãƒ•ãƒ­ãƒ¼å…¨ä½“

### Phase 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»APIï¼ˆé«˜å„ªå…ˆåº¦ï¼‰
- [ ] `prisma/schema.prisma` - ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ
- [ ] API routesã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
- [ ] ã‚¯ã‚¨ãƒªã®æœ€é©åŒ–
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### Phase 3: çŠ¶æ…‹ç®¡ç†ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰
- [ ] Redux storeæ§‹é€ 
- [ ] RTK Queryã®ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³
- [ ] éåŒæœŸå‡¦ç†ã®å®Ÿè£…
- [ ] çŠ¶æ…‹ã®æ­£è¦åŒ–

### Phase 4: UIãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆä¸­å„ªå…ˆåº¦ï¼‰
- [ ] ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ
- [ ] å†åˆ©ç”¨æ€§ã®è©•ä¾¡
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

### Phase 5: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰
- [ ] å…±é€šé–¢æ•°ã®å®Ÿè£…
- [ ] å‹å®šç¾©ã®é©åˆ‡æ€§
- [ ] ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³

---

## ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

### âš ï¸ ç™ºè¦‹ã•ã‚ŒãŸèª²é¡Œ

#### ğŸ”´ Critical Issues (ä¿®æ­£å¿…é ˆ)

**AUTH-001: ç’°å¢ƒå¤‰æ•°ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/auth.ts:12-13`
- **å•é¡Œ**: `AUTH_GOOGLE_ID` ã¨ `AUTH_GOOGLE_SECRET` ãŒç©ºæ–‡å­—åˆ—ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
- **ãƒªã‚¹ã‚¯**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«OAuthèªè¨¼ãŒç„¡åŠ¹ã«ãªã‚‹å¯èƒ½æ€§
- **ä¿®æ­£æ¡ˆ**: å¿…é ˆç’°å¢ƒå¤‰æ•°ã®æ¤œè¨¼ã‚’è¿½åŠ 
```typescript
if (!process.env.AUTH_GOOGLE_ID || !process.env.AUTH_GOOGLE_SECRET) {
  throw new Error('Required OAuth environment variables are missing')
}
```

**AUTH-002: é©åˆ‡ã§ãªã„ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°å‡ºåŠ›**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/auth.ts:42-43`
- **å•é¡Œ**: æœ¬ç•ªç’°å¢ƒã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®æƒ…å ±ãŒãƒ­ã‚°ã«å‡ºåŠ›ã•ã‚Œã‚‹
- **ãƒªã‚¹ã‚¯**: æ”»æ’ƒè€…ãŒãƒ­ã‚°ã‹ã‚‰æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ¨æ¸¬ã§ãã‚‹
- **ä¿®æ­£æ¡ˆ**: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã¯ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’èª¿æ•´

#### ğŸŸ¡ Medium Issues (æ”¹å–„æ¨å¥¨)

**AUTH-003: å‹å®‰å…¨æ€§ã®å•é¡Œ**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/auth.ts:102-105`
- **å•é¡Œ**: `token.id` ãªã©ã€æœªå®šç¾©ã®å¯èƒ½æ€§ãŒã‚ã‚‹å€¤ã« `as string` ã§å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
- **ä¿®æ­£æ¡ˆ**: é©åˆ‡ãªnullãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 

**AUTH-004: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¸€è²«æ€§**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/workspaces/route.ts:23,55`
- **å•é¡Œ**: åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å½¢å¼ãŒç•°ãªã‚‹
- **ä¿®æ­£æ¡ˆ**: çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã‚’å®šç¾©

**AUTH-005: èªè¨¼çŠ¶æ…‹ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/auth.ts:57-72 vs 73-92`
- **å•é¡Œ**: æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‡¦ç†ã§é¡ä¼¼ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒé‡è¤‡
- **ä¿®æ­£æ¡ˆ**: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯ã‚’å…±é€šé–¢æ•°ã«æŠ½å‡º

#### ğŸŸ¢ Minor Issues (æ¤œè¨äº‹é …)

**AUTH-006: middlewareè¨­å®šã®ç¯„å›²**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `middleware.ts:6`
- **å•é¡Œ**: matcher ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒåºƒã™ãã‚‹å¯èƒ½æ€§
- **æ¤œè¨**: API routesã‚„é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ˆã‚Šæ˜ç¢ºã«é™¤å¤–

**AUTH-007: ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚ŒãŸãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/auth.ts:38-39`
- **æ¤œè¨**: æœ¬ç•ªç’°å¢ƒã§ã¯å‰Šé™¤ã‚’æ¨å¥¨

### âœ… è‰¯ã„ç‚¹

1. **é©åˆ‡ãªèªè¨¼ãƒ•ãƒ­ãƒ¼**: NextAuth.js v5ã‚’æ­£ã—ãä½¿ç”¨
2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ**: Prismaã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã§é©åˆ‡ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ç®¡ç†
3. **OAuth ã‚¹ã‚³ãƒ¼ãƒ—**: Google Driveçµ±åˆã«å¿…è¦ãªæœ€å°é™ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’è¨­å®š
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼èªå¯**: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ˆã‚‹ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆæ©Ÿèƒ½ã‚’å®Ÿè£…
5. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: JWTãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æˆ¦ç•¥ã‚’æ¡ç”¨
6. **ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‡¦ç†**: é©åˆ‡ãªèªè¨¼å¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‡¦ç†

### Phase 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ã‚¹ã‚­ãƒ¼ãƒãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

#### ğŸ”´ Critical Issues (ä¿®æ­£å¿…é ˆ)

**DB-001: lastActiveSpaceIdå¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã®æ¬ å¦‚**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `prisma/schema.prisma:23`
- **å•é¡Œ**: `User.lastActiveSpaceId` ã«Spaceãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ãŒãªã„
- **ãƒªã‚¹ã‚¯**: å­˜åœ¨ã—ãªã„SpaceIDãŒå‚ç…§ã•ã‚Œã‚‹å¯èƒ½æ€§
- **ä¿®æ­£æ¡ˆ**: é©åˆ‡ãªå¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è¿½åŠ 

**DB-002: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰€æœ‰æ¨©ãƒã‚§ãƒƒã‚¯ã®ä¸å‚™**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/spaces/route.ts:34,57`
- **å•é¡Œ**: emailã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¥ç¶šã—ã¦ã„ã‚‹ï¼ˆidã‚’ä½¿ã†ã¹ãï¼‰
- **ãƒªã‚¹ã‚¯**: åŒä¸€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§è¤‡æ•°ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚ã‚‹å ´åˆã®å•é¡Œ
- **ä¿®æ­£æ¡ˆ**: user.idã‚’ä½¿ç”¨ã—ãŸæ¥ç¶šã«å¤‰æ›´

#### ğŸŸ¡ Medium Issues (æ”¹å–„æ¨å¥¨)

**DB-003: å†—é•·ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `prisma/schema.prisma:107,148,170`
- **å•é¡Œ**: `order` å˜ä½“ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå†—é•·ï¼ˆè¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ååˆ†ï¼‰
- **ä¿®æ­£æ¡ˆ**: å˜ä½“ã®orderã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å‰Šé™¤

**DB-004: ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¤–ã§ã®ã‚¯ã‚¨ãƒªå®Ÿè¡Œ**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/resources/reorder/route.ts:84-87`
- **å•é¡Œ**: ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«åˆ¥ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œ
- **ä¿®æ­£æ¡ˆ**: æ›´æ–°çµæœã‚’ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§å–å¾—

**DB-005: N+1ã‚¯ã‚¨ãƒªã®å¯èƒ½æ€§**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: APIãƒ«ãƒ¼ãƒˆå…¨èˆ¬
- **å•é¡Œ**: é–¢é€£ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã‚¯ã‚¨ãƒªã§includeãŒä½¿ã‚ã‚Œã¦ã„ãªã„
- **ä¿®æ­£æ¡ˆ**: å¿…è¦ãªé–¢é€£ãƒ‡ãƒ¼ã‚¿ã‚’é©åˆ‡ã«include

#### ğŸŸ¢ Minor Issues (æ¤œè¨äº‹é …)

**DB-006: ã‚¹ã‚­ãƒ¼ãƒã‚³ãƒ¡ãƒ³ãƒˆã®è¨€èªæ··åœ¨**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `prisma/schema.prisma:119,141`
- **æ¤œè¨**: è‹±èªã«çµ±ä¸€ã™ã‚‹ã‹æ—¥æœ¬èªã«çµ±ä¸€ã™ã‚‹ã‹

**DB-007: VarCharé•·ã®å¦¥å½“æ€§**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `prisma/schema.prisma:156`
- **æ¤œè¨**: title ã®255æ–‡å­—åˆ¶é™ãŒé©åˆ‡ã‹ã©ã†ã‹

### âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®è‰¯ã„ç‚¹

1. **éšå±¤æ§‹é€ ã®é©åˆ‡ãªè¨­è¨ˆ**: Workspace > Space > Section > Resource ã®è«–ç†çš„ãªéšå±¤
2. **ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤**: é©åˆ‡ãªonDelete: Cascadeã®è¨­å®š
3. **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥**: æ¤œç´¢æ€§èƒ½ã‚’è€ƒæ…®ã—ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ
4. **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ä½¿ç”¨**: è¤‡é›‘ãªæ“ä½œã§ã®ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºä¿
5. **NextAuthçµ±åˆ**: æ¨™æº–çš„ãªNextAuthã‚¹ã‚­ãƒ¼ãƒã®å®Ÿè£…
6. **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—**: é©åˆ‡ãªcreatedAt/updatedAtã®è¨­å®š

### Phase 3: APIãƒ«ãƒ¼ãƒˆæ§‹é€ ãƒ»ãƒ­ã‚¸ãƒƒã‚¯ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

#### ğŸ”´ Critical Issues (ä¿®æ­£å¿…é ˆ)

**API-001: å…¥åŠ›å€¤æ¤œè¨¼ã®æ¬ å¦‚**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/workspaces/route.ts:34-35`
- **å•é¡Œ**: POSTå‡¦ç†ã§name ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ¤œè¨¼ãŒä¸ååˆ†
- **ãƒªã‚¹ã‚¯**: XSSæ”»æ’ƒã€ãƒ‡ãƒ¼ã‚¿ç ´æã®å¯èƒ½æ€§
- **ä¿®æ­£æ¡ˆ**: zodç­‰ã‚’ä½¿ç”¨ã—ãŸå…¥åŠ›å€¤æ¤œè¨¼ã‚¹ã‚­ãƒ¼ãƒã®å®Ÿè£…

**API-002: èªå¯å‡¦ç†ã®ãƒã‚¤ãƒ‘ã‚¹**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/workspaces/reorder/route.ts:16-22`
- **å•é¡Œ**: ä¸¦ã³æ›¿ãˆå‡¦ç†ã§ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®æ‰€æœ‰æ¨©ç¢ºèªãŒç„¡ã„
- **ãƒªã‚¹ã‚¯**: ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ“ä½œã•ã‚Œã‚‹å¯èƒ½æ€§
- **ä¿®æ­£æ¡ˆ**: æ“ä½œå‰ã«æ‰€æœ‰æ¨©ç¢ºèªã‚’è¿½åŠ 

**API-003: ãƒªã‚½ãƒ¼ã‚¹æ‰€æœ‰æ¨©ãƒã‚§ãƒƒã‚¯ä¸å‚™**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/resources/[resourceId]/route.ts:81-91`
- **å•é¡Œ**: PATCHå‡¦ç†ã§ãƒªã‚½ãƒ¼ã‚¹æ‰€æœ‰è€…ã®ç¢ºèªãŒä¸ååˆ†
- **ãƒªã‚¹ã‚¯**: ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ç·¨é›†ã•ã‚Œã‚‹å¯èƒ½æ€§

#### ğŸŸ¡ Medium Issues (æ”¹å–„æ¨å¥¨)

**API-004: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¸çµ±ä¸€**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: APIãƒ«ãƒ¼ãƒˆå…¨èˆ¬
- **å•é¡Œ**: ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ãŒçµ±ä¸€ã•ã‚Œã¦ã„ãªã„
- **ä¿®æ­£æ¡ˆ**: çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã®å®šç¾©

**API-005: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ä¸å‚™**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/workspaces/route.ts:23`
- **å•é¡Œ**: ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ­ã‚°å‡ºåŠ›ãŒä¸ååˆ†
- **ä¿®æ­£æ¡ˆ**: é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®è¿½åŠ 

**API-006: N+1ã‚¯ã‚¨ãƒªã®å•é¡Œ**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/spaces/reorder/route.ts:47-52`
- **å•é¡Œ**: ãƒ«ãƒ¼ãƒ—å†…ã§ã®å€‹åˆ¥æ›´æ–°ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹
- **ä¿®æ­£æ¡ˆ**: ä¸€æ‹¬æ›´æ–°å‡¦ç†ã¸ã®å¤‰æ›´

#### ğŸŸ¢ Minor Issues (æ¤œè¨äº‹é …)

**API-007: ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: å„ç¨®APIãƒ«ãƒ¼ãƒˆ
- **å•é¡Œ**: æ‰€æœ‰æ¨©ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯ã®é‡è¤‡
- **æ¤œè¨**: å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®ä½œæˆ

**API-008: å¤šè¨€èªå¯¾å¿œã®ä¸çµ±ä¸€**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: å„ç¨®APIãƒ«ãƒ¼ãƒˆ
- **å•é¡Œ**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè‹±èªã¨æ—¥æœ¬èªæ··åœ¨
- **æ¤œè¨**: è¨€èªã®çµ±ä¸€

### âœ… APIãƒ«ãƒ¼ãƒˆã®è‰¯ã„ç‚¹

1. **èªè¨¼ã®ä¸€è²«æ€§**: å…¨ãƒ«ãƒ¼ãƒˆã§é©åˆ‡ã«getCurrentUser()ã‚’ä½¿ç”¨
2. **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³æ´»ç”¨**: è¤‡é›‘ãªæ“ä½œã§ã®ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºä¿
3. **HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰**: é©åˆ‡ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä½¿ç”¨
4. **RESTfulè¨­è¨ˆ**: é©åˆ‡ãªHTTPãƒ¡ã‚½ãƒƒãƒ‰ã¨URLæ§‹é€ 

### Phase 4: ReduxçŠ¶æ…‹ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

#### ğŸŸ¡ Medium Issues (æ”¹å–„æ¨å¥¨)

**REDUX-001: çŠ¶æ…‹ç®¡ç†ã®ä¸€è²«æ€§å•é¡Œ**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/lib/redux/features/resource/resourceSlice.ts:4-6`
- **å•é¡Œ**: resourceSliceã«loading/errorã‚¹ãƒ†ãƒ¼ãƒˆãŒç„¡ã„ï¼ˆworkspaceSliceã«ã¯æœ‰ã‚Šï¼‰
- **ä¿®æ­£æ¡ˆ**: å…¨ã‚¹ãƒ©ã‚¤ã‚¹ã§ä¸€è²«ã—ãŸã‚¹ãƒ†ãƒ¼ãƒˆæ§‹é€ ã‚’æ¡ç”¨

**REDUX-002: ç„¡é§„ãª APIã‚³ãƒ¼ãƒ«**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/lib/redux/features/workspace/workSpaceAPI.ts:47-53`
- **å•é¡Œ**: deleteWorkspaceå¾Œã«è¿½åŠ ã®fetchãŒå¿…è¦
- **ä¿®æ­£æ¡ˆ**: APIå´ã§å‰Šé™¤å¾Œã®ãƒªã‚¹ãƒˆã‚’è¿”ã™ã‹ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒ†ãƒ¼ãƒˆã‚’æ›´æ–°

**REDUX-003: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¸çµ±ä¸€**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/lib/redux/features/tabs/tabsSlice.ts:18-22`
- **å•é¡Œ**: try-catchãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ï¼ˆä»–ã‚¹ãƒ©ã‚¤ã‚¹ã¯ä½¿ç”¨ã›ãšï¼‰
- **ä¿®æ­£æ¡ˆ**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®çµ±ä¸€

#### ğŸŸ¢ Minor Issues (æ¤œè¨äº‹é …)

**REDUX-004: ãƒ•ã‚¡ã‚¤ãƒ«åã®è¡¨è¨˜ã‚†ã‚Œ**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `workSpaceAPI.ts` vs `spaceAPI.ts`
- **å•é¡Œ**: CamelCaseã®è¡¨è¨˜ãŒä¸çµ±ä¸€
- **æ¤œè¨**: ãƒ•ã‚¡ã‚¤ãƒ«åè¦å‰‡ã®çµ±ä¸€

**REDUX-005: æœªä½¿ç”¨ã®import**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/lib/redux/features/workspace/workspaceSlice.ts:13`
- **å•é¡Œ**: AsyncThunkå‹ãŒimportã•ã‚Œã¦ã„ã‚‹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ãªã„
- **æ¤œè¨**: ä¸è¦ãªimportã®å‰Šé™¤

**REDUX-006: å‹å®‰å…¨æ€§ã®æ”¹å–„ä½™åœ°**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/lib/redux/features/tabs/tabsSlice.ts:31,36`
- **å•é¡Œ**: action.payloadã®å‹æŒ‡å®šãŒä¸ååˆ†
- **æ¤œè¨**: ã‚ˆã‚Šå³å¯†ãªå‹å®šç¾©

### âœ… ReduxçŠ¶æ…‹ç®¡ç†ã®è‰¯ã„ç‚¹

1. **RTKæ¡ç”¨**: Redux Toolkitã«ã‚ˆã‚‹ç¾ä»£çš„ãªçŠ¶æ…‹ç®¡ç†
2. **ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ†é›¢**: featureåˆ¥ã®é©åˆ‡ãªsliceåˆ†å‰²
3. **éåŒæœŸå‡¦ç†**: createAsyncThunkã«ã‚ˆã‚‹é©åˆ‡ãªéåŒæœŸå‡¦ç†
4. **ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«æ›´æ–°**: Immerã«ã‚ˆã‚‹å®‰å…¨ãªçŠ¶æ…‹æ›´æ–°
5. **å‹å®‰å…¨æ€§**: TypeScriptã«ã‚ˆã‚‹å‹ä»˜ã‘Stateã¨Dispatch

### Phase 5-7: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

#### ğŸ”´ Critical Issues (ä¿®æ­£å¿…é ˆ)

**PERF-001: å¤§ãã™ãã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/(dashboard)/components/DashboardContent.tsx:350-377`
- **å•é¡Œ**: 377è¡Œã®å·¨å¤§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€è¤‡é›‘ãªãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ãƒ­ã‚¸ãƒƒã‚¯
- **ãƒªã‚¹ã‚¯**: ä¿å®ˆæ€§ä½ä¸‹ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ
- **ä¿®æ­£æ¡ˆ**: å°ã•ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²

**PERF-002: ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã®å•é¡Œ**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `package.json:20,30`
- **å•é¡Œ**: googleapisï¼ˆ~2MBï¼‰ã€lodashï¼ˆ~500KBï¼‰ãªã©é‡ã„ä¾å­˜é–¢ä¿‚
- **ãƒªã‚¹ã‚¯**: åˆæœŸèª­ã¿è¾¼ã¿æ™‚é–“ã®å¢—åŠ 
- **ä¿®æ­£æ¡ˆ**: é…å»¶èª­ã¿è¾¼ã¿ã€tree-shakingã€è»½é‡ä»£æ›¿ã®æ¤œè¨

#### ğŸŸ¡ Medium Issues (æ”¹å–„æ¨å¥¨)

**UI-001: ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªã®ä¸åœ¨**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨èˆ¬
- **å•é¡Œ**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¨ãƒ©ãƒ¼ã‚’é©åˆ‡ã«ã‚­ãƒ£ãƒƒãƒã™ã‚‹ä»•çµ„ã¿ãŒç„¡ã„
- **ä¿®æ­£æ¡ˆ**: React Error Boundaryã®å®Ÿè£…

**UI-002: éåº¦ã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/features/workspace/components/sidebar/WorkspaceList.tsx`
- **å•é¡Œ**: ä¾å­˜é…åˆ—ãŒå¤§ããã€ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å¯èƒ½æ€§
- **ä¿®æ­£æ¡ˆ**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²ã€ä¾å­˜é–¢ä¿‚ã®æœ€é©åŒ–

**UTIL-001: APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®é‡è¤‡**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: å„ç¨®APIé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«
- **å•é¡Œ**: é¡ä¼¼ã®fetchãƒ­ã‚¸ãƒƒã‚¯ãŒç¹°ã‚Šè¿”ã—å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- **ä¿®æ­£æ¡ˆ**: å…±é€šAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ä½œæˆ

#### ğŸŸ¢ Minor Issues (æ¤œè¨äº‹é …)

**UI-003: ãƒ—ãƒ­ãƒƒãƒ—ãƒ‰ãƒªãƒªãƒ³ã‚°**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **å•é¡Œ**: è¤‡é›‘ãªçŠ¶æ…‹ã®å—ã‘æ¸¡ã—
- **æ¤œè¨**: Context APIã‚„ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®æ´»ç”¨

**PERF-003: ç”»åƒæœ€é©åŒ–ã®ä¸å‚™**
- **ãƒ•ã‚¡ã‚¤ãƒ«**: faviconèª­ã¿è¾¼ã¿å‡¦ç†
- **å•é¡Œ**: Next.js Imageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ãªã„
- **æ¤œè¨**: é©åˆ‡ãªç”»åƒæœ€é©åŒ–ã®å®Ÿè£…

### âœ… UIãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è‰¯ã„ç‚¹

1. **é©åˆ‡ãªãƒ¡ãƒ¢åŒ–**: useMemoã€useCallbackã®é©åˆ‡ãªä½¿ç”¨
2. **æ¥½è¦³çš„æ›´æ–°**: APIã‚³ãƒ¼ãƒ«å‰ã®UIæ›´æ–°ã«ã‚ˆã‚‹è‰¯å¥½ãªUX
3. **å‹å®‰å…¨æ€§**: TypeScriptã«ã‚ˆã‚‹é©åˆ‡ãªå‹ä»˜ã‘
4. **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: ãƒ•ã‚©ãƒ¼ãƒ ã§ã®é©åˆ‡ãªaria-labelä½¿ç”¨
5. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ **: feature-basedã®è«–ç†çš„ãªæ§‹æˆ

---

## æ¨å¥¨æ”¹å–„æ¡ˆ

### ğŸ”´ ç·Šæ€¥åº¦é«˜ - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ”¹å–„

1. **ç’°å¢ƒå¤‰æ•°ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**
   ```typescript
   // src/lib/env.ts
   const requiredEnvVars = ['AUTH_GOOGLE_ID', 'AUTH_GOOGLE_SECRET', 'DATABASE_URL']
   requiredEnvVars.forEach(envVar => {
     if (!process.env[envVar]) {
       throw new Error(`Missing required environment variable: ${envVar}`)
     }
   })
   ```

2. **APIèªå¯å¼·åŒ–**
   ```typescript
   // src/lib/auth-utils.ts
   export async function validateResourceOwnership(resourceId: string, userId: string) {
     const resource = await prisma.resource.findFirst({
       where: { id: resourceId, userId }
     })
     if (!resource) throw new Error('Unauthorized')
     return resource
   }
   ```

3. **å…¥åŠ›å€¤æ¤œè¨¼ã‚¹ã‚­ãƒ¼ãƒ**
   ```typescript
   // src/lib/validation.ts
   import { z } from 'zod'
   
   export const createWorkspaceSchema = z.object({
     name: z.string().min(1).max(100).trim()
   })
   ```

### ğŸŸ¡ ä¸­å„ªå…ˆåº¦ - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„

1. **ãƒãƒ³ãƒ‰ãƒ«æœ€é©åŒ–**
   ```typescript
   // next.config.ts
   module.exports = {
     webpack: (config) => {
       config.resolve.alias = {
         ...config.resolve.alias,
         'lodash': 'lodash-es'
       }
       return config
     },
     experimental: {
       bundlePagesRouterDependencies: true
     }
   }
   ```

2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²**
   ```typescript
   // DashboardContent.tsx ã‚’ä»¥ä¸‹ã«åˆ†å‰²:
   // - DragAndDropProvider.tsx
   // - WorkspacePanel.tsx  
   // - SpacePanel.tsx
   // - ResourcePanel.tsx
   ```

3. **ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªå®Ÿè£…**
   ```typescript
   // src/components/ErrorBoundary.tsx
   export class ErrorBoundary extends Component {
     // React Error Boundaryå®Ÿè£…
   }
   ```

### ğŸŸ¢ ä½å„ªå…ˆåº¦ - ã‚³ãƒ¼ãƒ‰å“è³ªæ”¹å–„

1. **å…±é€šAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**
   ```typescript
   // src/lib/api-client.ts
   class ApiClient {
     async request<T>(endpoint: string, options?: RequestInit): Promise<T>
   }
   ```

2. **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°çµ±åˆ**
   ```typescript
   // src/lib/utils/index.ts
   export { validateOwnership } from './auth'
   export { standardErrorResponse } from './responses'
   ```

---

## æœ€çµ‚è©•ä¾¡ãƒ»ç·æ‹¬

### ğŸ¯ ç·åˆè©•ä¾¡: **B+ (è‰¯å¥½ã€æ”¹å–„ä½™åœ°ã‚ã‚Š)**

**å¼·ã¿:**
- NextAuth.jsã¨Prismaã«ã‚ˆã‚‹å …å®Ÿãªèªè¨¼ãƒ»DBè¨­è¨ˆ
- Redux Toolkitã«ã‚ˆã‚‹ç¾ä»£çš„ãªçŠ¶æ…‹ç®¡ç†
- TypeScriptã«ã‚ˆã‚‹å‹å®‰å…¨æ€§
- feature-basedã®è«–ç†çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

**é‡è¦ãªæ”¹å–„ç‚¹:**
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®èªå¯å‡¦ç†å¼·åŒ– (Critical)
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– (ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²)
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€åŒ–

### ğŸ“Š å•é¡Œçµ±è¨ˆ
- ğŸ”´ Critical Issues: **6ä»¶** (èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£)
- ğŸŸ¡ Medium Issues: **11ä»¶** (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ä¿å®ˆæ€§)  
- ğŸŸ¢ Minor Issues: **8ä»¶** (ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ä¸€è²«æ€§)

### ğŸš€ å„ªå…ˆå®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

**Week 1 (å¿…é ˆ):**
- AUTH-001: ç’°å¢ƒå¤‰æ•°ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- API-002: èªå¯å‡¦ç†ã®ãƒã‚¤ãƒ‘ã‚¹ä¿®æ­£
- API-003: ãƒªã‚½ãƒ¼ã‚¹æ‰€æœ‰æ¨©ãƒã‚§ãƒƒã‚¯å¼·åŒ–

**Week 2-3 (æ¨å¥¨):**
- PERF-001: å¤§ããªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†å‰²
- API-004: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±ä¸€
- UI-001: ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªå®Ÿè£…

**Week 4+ (ç¶™ç¶šæ”¹å–„):**
- ãƒãƒ³ãƒ‰ãƒ«æœ€é©åŒ–
- å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ä½œæˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–å®Ÿè£…

---

## ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- âœ… Phase 1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»èªè¨¼å‘¨ã‚Š
- âœ… Phase 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»API  
- âœ… Phase 3: çŠ¶æ…‹ç®¡ç†
- âœ… Phase 4: UIãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- âœ… Phase 5: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ãƒ˜ãƒ«ãƒ‘ãƒ¼
- âœ… æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ

**é€²æ—**: 100% (ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†)